#带认证私有仓库
---
## 搭建仓库
在服务器上：
第一步：删除先前创建的无认证的仓库容器
`docker rm -f my-registry`
第二步：创建存放认证用户名和密码的文件：
`mkdir /my-registry/auth -p`
第三步：创建密码验证文件。注意将将USERNAME和PASSWORD替换为设置的用户名和密码
```
docker run --entrypoint htpasswd registry -Bbn USERNAME PASSWORD > /my-registry/auth/htpasswd
```
第四步：重新启动仓库镜像
```
docker run -d -p 8000:5000 --restart=always --name docker-registry \
-v /my-registry/registry:/var/lib/registry \
-v /my-registry/auth:/auth \
-e "REGISTRY_AUTH=htpasswd" \
-e "REGISTRY_AUTH_HTPASSWD_REALM=Registry Realm" \
-e "REGISTRY_AUTH_HTPASSWD_PATH=/auth/htpasswd" \
registry

```


## 上传、下载镜像